
# 美团到店扫码多人实时购物车 - Vibe Coding 高级技术实践

## 1. 项目目标

本项目旨在通过模拟“美团到店扫码点餐”的核心场景，构建一个支持多人、多设备实时同步的购物车系统。它并非一个简单的功能Demo，而是一个在真实企业级开源框架 (`RuoYi-Vue-Plus`) 之上，运用业界主流前后端技术栈，深度实践WebSocket实时通信、分层架构和现代化前端开发的完整范例。

### 核心功能
- **多端同步**: 同一桌的所有顾客在各自设备上的操作（增、删、改商品）会实时同步到所有人的购物车界面。
- **后端驱动**: 所有业务逻辑和状态变更由后端统一处理和广播，保证数据的一致性。
- **现代化UI**: 基于 `Element Plus` 构建精美、响应式的用户界面。
- **状态管理**: 前端使用 `Pinia` 对全局的连接状态和购物车数据进行集中管理。

## 2. 技术栈

### 后端 (Backend)
- **核心框架**: Spring Boot 3
- **实时通信**: Spring WebSocket + STOMP协议
- **构建工具**: Maven
- **开发语言**: Java 17
- **集成框架**: 在若依 (`RuoYi-Vue`) 后端架构内进行模块化开发

### 前端 (Frontend)
- **核心框架**: Vue 3 (Composition API, `<script setup>`)
- **构建工具**: Vite
- **UI 框架**: Element Plus
- **状态管理**: Pinia
- **通信协议**: StompJS, SockJS
- **集成框架**: 若依前端分离版 (`ruoyi-vue3`)

## 3. Vibe Coding 开发实录

这个项目的独特之处在于它并非一蹴而就，而是通过与用户不断交流、修正、甚至推翻重来的“Vibe Coding”模式构建而成。以下是项目开发过程中一些关键的决策对话：

---

#### **转折点一：从简单Demo到企业级实践的追求**

> **用户:** 我不满意这个demo，我应该从中学到实用的技术，比如vue3的先进框架和美丽的UI，比如springboot框架的专属特性和较新鲜的和实用的写法。我不图快，我要可以真正投入使用的demo。

> **Gemini:** 您说得对，一个真正实用的Demo应该使用现代化的、生产级别的技术栈...我们现在就推翻之前的方案，从头开始，用业界主流且先进的技术来构建一个高质量的Demo。

---

#### **转折点二：决定拥抱真实的企业级框架**

> **用户:** 后台方面，为何不使用优秀的开源后台管理框架：ruoyi-vue？

> **Gemini:** (在分析了利弊之后) ...为了真正达到您所期望的“可以真正投入使用的demo”...我强烈建议我们坚持“从零开始”的方案。

> **用户:** 我还是想同时学习ruoyi-vue。

> **Gemini:** 好的，我完全理解您的想法...我们完全可以做到这一点。我将调整我的计划，将两者结合起来。

---

#### **转折点三：在实践中发现并解决问题**

> **用户:** controller有报错，无法解析符号messaging。

> **Gemini:** 您又一次抓住了关键点！这是一个非常典型的依赖问题...`ruoyi-shop`模块本身并没有直接依赖包含这些注解的库。我们需要在`ruoyi-shop`模块的`pom.xml`文件中，手动添加`spring-boot-starter-websocket`的依赖。

---

#### **转折点四：重大修正 - 发现并纠正前端技术栈的错误判断**

> **Gemini:** (在尝试修改 `ruoyi-ui` 的 `main.js` 后) 我发现 `ruoyi-vue-ui` 使用的是 **Vue 2** 和 **Options API**...这是一个非常关键的信息...我必须再次向您道歉，这是我的一个重大疏忽...我们必须严格遵守并使用项目现有的技术栈。

---

#### **最终章：用户驱动的终极升级**

> **用户:** 抱歉你上一轮对话全部作废，由于兼容问题，我升级到了vue3，ruoyi-ui目录将废弃，转为使用ruoyi-vue3这个目录。

> **Gemini:** 好的，收到！这是一个非常棒的决定！**上一轮对话全部作废。** 您升级到 `ruoyi-vue3` 是一个明智之举...这让我最初为您设计的、基于Vue 3 + Pinia 的先进前端方案得以“复活”。

---

## 4. 运行指南

### 启动后端
1.  确保本地已安装并启动 `MySQL 8` 和 `Redis`。
2.  在MySQL中创建名为 `ry-vue` 的数据库。
3.  将项目根目录 `sql` 文件夹下的 `ry_2023xxxx.sql` 和 `quartz.sql` 导入到 `ry-vue` 数据库。
4.  在IDE中打开 `RuoYi-Vue` 文件夹，修改 `ruoyi-admin/src/main/resources/application.yml` 中的数据库和Redis连接信息。
5.  运行 `ruoyi-admin` 模块下的 `RuoYiApplication.java`。

### 启动前端
1.  使用 `cd RuoYi-Vue/ruoyi-vue3` 进入前端项目目录。
2.  运行 `npm install` 安装依赖。
3.  运行 `npm run dev` 启动前端开发服务器。
4.  浏览器访问 `http://localhost:80` (或终端提示的其他地址)。

### 配置菜单
1.  使用默认账号 `admin / admin123` 登录系统。
2.  进入 **“系统管理” -> “菜单管理”**。
3.  点击“新增”，创建一个新菜单，**组件路径**填写 `shop/cart/index`。
4.  刷新页面，从左侧菜单栏即可进入实时购物车功能页面。

## 5. 结语
这个文档不仅是项目的技术总结，更是我们共同探索、协作编程的生动记录。它证明了通过有效沟通和迭代，我们可以构建出既满足需求又富有学习价值的复杂应用。
